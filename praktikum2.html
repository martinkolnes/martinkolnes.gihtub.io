<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Martin Kolnes, Karin Täht" />


<title></title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Kodu</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Praktikumide materjalid
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="praktikum1.html">1. Praktikum - sissejuhatus</a>
    </li>
    <li>
      <a href="praktikum2.html">2. Praktikum - joonised</a>
    </li>
    <li>
      <a href="praktikum3.html">3. Praktikum - ANOVA</a>
    </li>
    <li>
      <a href="praktikum4v2.html">4. Praktikum - regressioon</a>
    </li>
    <li>
      <a href="praktikum5.html">5. Praktikum - logistiline regressioon</a>
    </li>
    <li>
      <a href="praktikum6.html">6. Praktikum - eksploratiivne faktoranaluus</a>
    </li>
    <li>
      <a href="praktikum7.html">7. Praktikum - Struktuurvorrandite mudelid</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Lisamaterjalid
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lisa_andmente_importimine.html">Andmete importimine</a>
    </li>
    <li>
      <a href="praktikum1_korrelatsioon.html">Korrelatsioon</a>
    </li>
    <li>
      <a href="praktikum1_subsetting.html">Andmete eraldamine</a>
    </li>
    <li>
      <a href="praktikum2_ttestid.html">Keskmiste vordlemine</a>
    </li>
    <li>
      <a href="lisa_joonis.html">Joonis - keskmised</a>
    </li>
  </ul>
</li>
<li>
  <a href="lugemist.html">Soovitused</a>
</li>
<li>
  <a href="about.html">Kontakt</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore"><ol start="2" style="list-style-type: decimal">
<li>praktikum: Joonised</li>
</ol></h1>
<h4 class="author"><em>Martin Kolnes, Karin Täht</em></h4>

</div>


<div id="praktikumi-eesmargid" class="section level1">
<h1>Praktikumi eesmärgid</h1>
<ul>
<li>Vaatame üle, kuidas lugeda andmeid RStudiosse</li>
<li>Jooniste abil andmetega tutvumine<br />
</li>
<li>Korrelatsioonanalüüs ja hajuvusdiagramm<br />
</li>
<li>Keskmiste võrdlemine kahe grupi korral</li>
</ul>
<p>Laadige alla <a href="https://drive.google.com/open?id=1xHiis3zt-LOlam2BOL1HqIYBq2XwBqlQ">praktikumi andmed</a>.</p>
</div>
<div id="tookausta-maaratlemine" class="section level1">
<h1>Töökausta määratlemine</h1>
<p>Alustuseks peaksime rääkima sellisest mõistest nagu R-i töökaust. Kui me RStudio käivitame, määrab R ära kausta, millest ta vaikimisi faile otsima hakkab. Kui tahame salvestada andmeid või jooniseid, siis salvestatakse ka need vaikimisi just sinna kausta. Seda kausta nimetataksegi R-i töökaustaks. Windowsi arvutis on vaikimisi töökaustaks <em>My Documents</em>. Andmefailid, mida me laadida tahame, paiknevad tõenäoliselt mõnes muus kaustas või alamkaustas. R-i töökausta muutmiseks peaksime otsima RStudio <em>Files</em>-paneeli (akna alumises parempoolses nurgas) abil üles selle kausta, milles meid huvitav andmefail paikneb. Seejärel peaksime muutma selle kausta R-i töökaustaks, vajutades <em>Files</em>-paneeli ülaosas asuvat nuppu <em>More</em> ja valides avanevast menüüst <em>Set As Working Directory</em>.<br />
<img src="workspace.png" alt="Joonis 1. Töökausta määramine" /></p>
<div id="kordamine" class="section level2">
<h2>Kordamine</h2>
<p>Kasutame andmestikku PISA.</p>
<ol style="list-style-type: decimal">
<li>Tehke praktikumi materjalide jaoks arvutis eraldi kaust. Tõstke materjalid sinna kausta ja laadige need RStudiosse.<br />
</li>
<li>Leidke uuringus osalenute keskmine vanus.</li>
</ol>
<pre class="r"><code>mean(pisa$AGE)# keskmise arvutamiseks sai kasutada funktsiooni mean()</code></pre>
<pre><code>## [1] 15.81886</code></pre>
<pre class="r"><code>#summary(pisa)#annab ülevaate tervest andmestikust</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Leidke tüdrukute ja poiste keskmine vanus.</li>
</ol>
<pre class="r"><code>mean(pisa[pisa$Gender==1, &quot;AGE&quot;])</code></pre>
<pre><code>## [1] 15.82267</code></pre>
<pre class="r"><code>mean(pisa$AGE[pisa$Gender == 1])</code></pre>
<pre><code>## [1] 15.82267</code></pre>
<pre class="r"><code>mean(pisa[pisa$Gender==2, &quot;AGE&quot;])</code></pre>
<pre><code>## [1] 15.81559</code></pre>
<pre class="r"><code>sd(pisa[pisa$Gender==1, &quot;AGE&quot;])</code></pre>
<pre><code>## [1] 0.2756248</code></pre>
<pre class="r"><code>sd(pisa[pisa$Gender==2, &quot;AGE&quot;])</code></pre>
<pre><code>## [1] 0.2882858</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Kui palju tüdrukuid ja poisse oli uuringus (1 = tüdruk, 2 = poiss)?</li>
</ol>
<pre class="r"><code>table(pisa$Gender)</code></pre>
<pre><code>## 
##   1   2 
## 345 401</code></pre>
<pre class="r"><code>mean(pisa[pisa$Gender==2, &quot;AGE&quot;])</code></pre>
<pre><code>## [1] 15.81559</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Kui palju õpilasi oli erinevates klassides (GR - klassid)?</li>
</ol>
<pre class="r"><code>table(pisa$GR)</code></pre>
<pre><code>## 
##   7   8   9 
##  15 202 529</code></pre>
</div>
</div>
<div id="andmete-sisselugemine-excelist-ja-spss-ist" class="section level1">
<h1>Andmete sisselugemine Excelist ja SPSS-ist</h1>
<p>RStudiosse saab andmeid laadida mitmel erineval viisil. Selles praktikumis vaatame kõige kiiremat moodust - andmete laadimine funktsioonide abil. Teiste viisidega tutvumiseks vaadake lisamaterjalide alt konspekti Andmete Importimine.<br />
Laadige enda arvutisse:<br />
1) <a href="https://drive.google.com/open?id=1SMASCTWq6upqWQTb9Tjb61O1jQWgiF4O">Andmestik nimega Kysimustik</a>(csv-formaadis);<br />
2) <a href="https://drive.google.com/open?id=1vzgv5gnOM_E-Nrs-zqQbsNbctHjS90mH">Andmestik nimega Kysimustik</a>(xls-fomraadis).</p>
<p>Paljude andmeformaatide jaoks on R-is olemas spetsiifilised funktsioonid:</p>
<ul>
<li>read.csv ja read.csv2 - csv-formaadis olevate andmete jaoks;<br />
</li>
<li>read.xlsx (paketis “xlsx”) - Exceli failide jaoks;<br />
</li>
<li>read.spss (paketis “foreign”) - SPSS failide jaoks;<br />
</li>
<li>read.table - txt-formaadis olevate andmete jaoks.</li>
</ul>
<p>Csv-formaadis olevate andmete sisselugemiseks saame kasutada funktsiooni <em>read.csv()</em>. Funktsiooni esimeseks arugmendiks pange andmestiku asukoht koos andmestiku nimega (minu arvutis oleks esimene argument antud andmete puhul “C:/Users/Martin/ownCloud/rojects/Rwebsite/martinkolnes.github.io/KMKT/2praktikum/Kysimustik.csv”).</p>
<pre class="r"><code>andmed &lt;- read.csv(&quot;C:/Users/Martin/ownCloud/Projects/Rwebsite/martinkolnes.github.io/KMKT/2praktikum/Kysimustik.csv&quot;, header=TRUE, sep =&quot;;&quot;) 
#lisaargumendiga &quot;header&quot; anname teada, et esimesel real on muutujate nimed
#lisaargumendiga &quot;sep&quot; anname teada, missuguse tähistusega eraldatakse veerge (peamised võimalused: sep = &quot;,&quot; - eraldajaks koma, sep = &quot; &quot; - erldajaks tühik, sep = &quot;;&quot; - eraldajaks semikoolon, sep = &quot;\t&quot; - eraldajaks TABiga(tabulaatoriga))</code></pre>
<p>Excelis olevate andmete importimiseks peame esialgu installeerima RStudiosse uue pakti nimega <em>xlsx</em>. Kirjutage konsoolile järgmine rida:</p>
<pre class="r"><code>install.packages(&quot;xlsx&quot;)</code></pre>
<p>Nüüd saame kasutada selles paketis olevat funktsiooni <em>read.xlsx()</em>. Esimeseks argumendiks paneme jälle andmestiku asukoha koos andmestiku nimega.</p>
<pre class="r"><code>library(xlsx)#teeb paketis olevad funktsioonid aktiivseks. 
andmed &lt;- read.xlsx(&quot;C:/Users/Martin/ownCloud/Projects/Rwebsite/martinkolnes.github.io/KMKT/2praktikum/Kysimustik.xls&quot;, sheetIndex = 1) </code></pre>
</div>
<div id="jooniste-abil-andmetega-tutvumine" class="section level1">
<h1>Jooniste abil andmetega tutvumine</h1>
<p>Jooniste tegemiseks soovitame kasutada paketti <em>ggplot2</em>. See on populaarne R’i pakett, mis võimaldab vähese vaevaga teha ilusaid jooniseid. Selles paketis on kaks funktsiooni jooniste tegemiseks: <em>ggplot()</em> ja <em>qplot()</em>. Meie soovitame kasutada funktsiooni <em>ggplot()</em>, sest see on paindlikum ja võimaldab erinevaid andmestikke ühele joonisele lisada.</p>
<p>Ülevaade selles paketis olevatest erinevatest funktsioonidest leiate lehelt <a href="http://docs.ggplot2.org/current/" class="uri">http://docs.ggplot2.org/current/</a>.</p>
<p>Vaatame esmalt üle, missugune on funktsioonile <em>ggplot()</em> antavate argumentide järjekord.</p>
<pre class="r"><code>library(ggplot2)# esmalt aktiveerime paketi. NB! pakett peab olema enne installeeritud
ggplot(andmed, aes(x = tunnus1, y = tunnus2)) #See on struktuur, mida saate alati joonise tegemisel kasutada.</code></pre>
<p>Sellisel kujul me veel ei näe joonist. Joonise ehitamine <em>ggplot()</em> funktsiooniga toimub kihtide alusel. Me peame lisama kihi, mis loob x ja y elementidest vastava struktuuri (sõltub sellest, kas tahame tunnuseid näha punktidena, tulpadena, ühendatud joontega jne.). Tulpade joonistamiseks peaksime lisama <em>geom_bar()</em>:</p>
<pre class="r"><code>ggplot(andmed, aes(x = tunnus1, y = tunnus2)) +
        geom_bar()</code></pre>
<div id="histogramm" class="section level2">
<h2>Histogramm</h2>
<p>Numbriliste tunnuste puhul peaks vaatama, milline on andmete jaotus. See annab meile ettekujutuse sellest, kas andmed on enam-vähem normaaljaotusega ja kas esineb üksikuid äärmuslikke väärtusi. Andmestikus PISA on kolm olulist tunnust, mille jaotust võiks uurida: lugemine (skoor muutujas nimega PV1READ), matemaatika (PV1MATH) ja loodusteadused (PV1SCIE). Teeme histogrammi lugemise alatesti skooride (PV1READ) jaotuse kohta.</p>
<pre class="r"><code>ggplot(pisa, aes(x=PV1READ))+
        geom_histogram()</code></pre>
<p><img src="Figs/unnamed-chunk-11-1.png" width="768" /></p>
<p>Histogrammi välimuse muutmiseks saab funktsioonile lisada erinevaid argumente:</p>
<ul>
<li><em>labs()</em> - võimaldab muuta joonise pealkirja, x-ja y-telje nimesid (labs(title= “jooniuse pealkiri”, x = “x-telje nimi”, y = “y-telje nimi”)).</li>
<li><em>xlim()</em> - horisontaaltelje otspunktide väärtused. Otspunktide väärtused tuleb anda funktsiooni c() sees, nt nii: xlim(c(100, 800))<br />
</li>
<li><em>ylim()</em> - vertikaaltelje otspunktide väärtused, samal kujul nagu argument xlim.<br />
</li>
<li><em>col</em> - tulpade värv. See argument lisatakse tavaliselt joonise struktuuri täpsustava kihi juurde (näiteks geom_histogram(col = “blue”, fill = “green”)). Värvi väärtust saab muuda kahel viisil: 1) värvi nimega(nt “grey”, “red”, “blue”); 2) peenemaid värvitoone saab valida värvi heksadetsimaalkoodi abil (nt #FF0000 on punase värvi kood). Need koodid leiata, kui guugledate <em>hexadecimal color codes</em>.<br />
</li>
<li>vormide kasutamine - joonisele saab lisada juba eelnevalt seadistatud vormi, mis kujundab joonise välimust. Näiteks argument <em>theme_bw()</em> annab joonisele valge tausta. Mõned klassikalised vormid leiata lehelt <a href="https://www.r-bloggers.com/ggplot2-themes-examples/" class="uri">https://www.r-bloggers.com/ggplot2-themes-examples/</a>.</li>
</ul>
<p>Kui sooviksime teha ülalolevat histogrammi natuke ilusamaks, siis võiksime koodi lisada järgmised täpsustused:</p>
<pre class="r"><code>ggplot(pisa, aes(x=PV1READ))+ #pluss märk näitab, et me liidame siia veel ühe argumendi juurde
        geom_histogram(col = &quot;blue&quot;, fill = &quot;gray&quot;)+
        labs(title = &quot;Lugemise alatesti skooride jaotus&quot;, x =&quot;Alatesti skoor&quot; , y = &quot;Sagedus&quot;)+
        theme_bw()</code></pre>
<p><img src="Figs/unnamed-chunk-12-1.png" width="768" /></p>
<p>Kui tahate joonist suuremal kujul vaadata, siis vajutage RStudio <em>Plots</em>-paneelil olevat nuppu <em>Zoom</em>. Joonise pildifailina salvestamiseks vajutage nuppu <em>Export</em> ja valige avanevast menüüst <em>Save as Image</em>.</p>
<p><strong>Ülesanne</strong><br />
1. Tehke histogramm loodusteaduste (PV1SCIE) tulemustega.</p>
<pre class="r"><code>ggplot(pisa, aes(x = PV1SCIE))+
        geom_histogram()+
        labs(title = &quot;Loodusteaduste testi tulemuste jaotus&quot;, x =&quot;Alatesti skoor&quot; , y = &quot;Sagedus&quot;)+
        theme_bw()</code></pre>
<p><img src="Figs/unnamed-chunk-13-1.png" width="768" /></p>
</div>
<div id="tulpdiagramm-barplot" class="section level2">
<h2>Tulpdiagramm (<em>barplot</em>)</h2>
<p>Kategooriatest koosneva tunnuse sageduse kujutamiseks kasutatakse tulpdiagrammi. Veerus nimega GR (<em>grade</em>) on kirjas õpilase klass. Teeme selle tunnuse kohta tulpdiagrammi:</p>
<pre class="r"><code>ggplot(pisa, aes(GR))+
        geom_bar()+
        labs(x =&quot;klass&quot; , y = &quot;õpilasi valimis&quot;)+
        theme_bw()</code></pre>
<p><img src="Figs/unnamed-chunk-14-1.png" width="768" /></p>
<p>Näeme, et enamik antud valimis olevatest õpilastest käivad 8. või 9. klassis. Tulpdiagramm on eriti kasulik juhul, kui kategooriaid on rohkem. See annab meile hea ülevaate gruppide suurustest ja võimaldab tuvastada teistest eristuvaid gruppe.</p>
<p><strong>*LISA</strong><br />
Tulpdiagrammi abil saab ka kujutada gruppide keskmisi tulemusi. Kujutame näiteks matemaatika skoori keskmisi tulemusi klasside lõikes. Selle tegemiseks peame lisama kihile <em>geom_bar</em> kaks argumenti: “stat =”summary“”&quot; ja “f”un.y = “mean”“. Need argumendid näitavad, et me kasutame joonise tegemiseks keskmisi tulemusi.</p>
<pre class="r"><code>ggplot(pisa, aes(y=PV1MATH, x = GR))+
        geom_bar(aes(group = GR), stat = &quot;summary&quot;, fun.y = &quot;mean&quot;) +
        labs(x =&quot;klass&quot; , y = &quot;matemaatika alatesti keskmine skoor&quot;)</code></pre>
<p><img src="Figs/unnamed-chunk-15-1.png" width="768" /></p>
<p>Kontrollimise mõttes võiks need tulemused arvutada ka funktsiooniga <em>mean</em>. Gruppide lõikes mingi kirjeldava statistika näitaja arvutamiseks soovitan kasutada funktsiooni nimega <em>tapply</em>.<br />
Funktsiooni <em>tapply</em> argumentideks on 1) numbriline tunnus, 2) grupeeriv tunnus, 3) kirjeldava statistika funktsiooni nimetus (nt mean, median, sd), 4) na.rm=TRUE juhul kui andmetes esineb puuduvaid väärtusi.</p>
<pre class="r"><code>tapply(sõltuv tunnus, grupeeriv tunnus, kasutatav funktsioon)</code></pre>
<pre class="r"><code>tapply(pisa$PV1MATH, pisa$GR, mean, na.rm=TRUE)</code></pre>
<pre><code>##        7        8        9 
## 359.4100 485.1533 517.5558</code></pre>
</div>
<div id="normaaljaotuse-testmine" class="section level2">
<h2>Normaaljaotuse testmine</h2>
<p>Teeme siinkohal väikse kõrvalepõike nomraaljaotuse testimise juurde. Histogrammide abil saime üldise ettekujutuse andmete jaotusest, aga me peaksime hindama seda ka statistiliselt. Üks levinumaid statistilisi meetodeid normaaljaotuse kontrollimiseks on Shapiro Wilki test. Selle testi väljundist tuleb vaadata <em>p-value</em>-t. Kui <em>p-value</em> on väiksem kui 0.05, siis ei ole andmed selle testi kohaselt normaaljaotuslikud. Vaatame kahe muutuja jaotust (PV1READ, JOYREAD) sugude lõikes.</p>
<pre class="r"><code># Kontrollime naiste(1) puhul tunnuse &quot;PV1READ&quot; normaaljaotust:
shapiro.test(subset(pisa$PV1READ, pisa$Gender == 1)) </code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  subset(pisa$PV1READ, pisa$Gender == 1)
## W = 0.99611, p-value = 0.5587</code></pre>
<pre class="r"><code># Kontrollime meeste(2) puhul tunnuse &quot;PV1READ&quot; normaaljaotust:
shapiro.test(subset(pisa$PV1READ, pisa$Gender == 2))</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  subset(pisa$PV1READ, pisa$Gender == 2)
## W = 0.99713, p-value = 0.7095</code></pre>
<pre class="r"><code># Kontrollime naiste(1) puhul tunnuse &quot;JOYREAD&quot; normaaljaotust:
shapiro.test(subset(pisa$JOYREAD, pisa$Gender == 1))</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  subset(pisa$JOYREAD, pisa$Gender == 1)
## W = 0.9912, p-value = 0.03983</code></pre>
<pre class="r"><code># Kontrollime meeste(2) puhul tunnuse &quot;JOYREAD&quot; normaaljaotust:
shapiro.test(subset(pisa$JOYREAD, pisa$Gender == 2))</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  subset(pisa$JOYREAD, pisa$Gender == 2)
## W = 0.99, p-value = 0.008508</code></pre>
<p>Praktikas leiab harva selle testi põhjal normaalajotusele vastavust, st on levinud asümmeetriakordaja (<em>skewness</em>) ning ekstsessi (<em>kurtosis</em>) põhjal normaaljaotuse hindamine. Andmeid peetakse normaaljaotusele ligilähedaseks siis, kui asümmeetriakordaja ja järsakusaste/ekstsess on vahemikus -1 kuni 1.</p>
<p>Vaatame, kuidas asümmeetrijakordajat (<em>skew</em>) ja ekstsessi (<em>kurtosis</em>) arvutada.<br />
Selleks kasutame funktsiooni <em>describe()</em>, mis on paketi <em>psych</em> funktsioonide komplektis. Esmalt peame selle paketi enda arvutisse installeerima. See käib läbi RStudio konsooli:</p>
<pre class="r"><code>install.packages(&quot;psych&quot;)#kirjutage see rida RStudio konsoolile. Paketi installeerimise peale võib minna natuke aega.</code></pre>
<p>Nüüd saame kasutada funktsiooni <em>describe</em>. Sellele funktsioonile anname argumendiks ühe grupi andmed.</p>
<pre class="r"><code>library(psych)#selle käsuga teeme antud paketi funktsioonide aktiivseks
describe(subset(pisa$PV1READ, pisa$Gender == 1))#naiste andmed</code></pre>
<pre><code>##    vars   n   mean    sd median trimmed   mad    min   max  range  skew
## X1    1 345 513.54 75.16 516.82  514.99 79.97 305.03 717.8 412.77 -0.14
##    kurtosis   se
## X1    -0.26 4.05</code></pre>
<pre class="r"><code>describe(subset(pisa$PV1READ, pisa$Gender == 2))#meeste andmed</code></pre>
<pre><code>##    vars   n   mean    sd median trimmed   mad    min    max  range  skew
## X1    1 401 472.63 78.73 468.23  473.35 77.61 230.93 681.39 450.46 -0.11
##    kurtosis   se
## X1    -0.04 3.93</code></pre>
<p>** Ülesanne **<br />
2. Missugused on tunnuse JOYREAD asümmeetrijakordaja ja ekstsess sugude lõikes? Kas neid võib pidada normaaljaotusele vastavaks?</p>
<pre class="r"><code>describe(subset(pisa$JOYREAD, pisa$Gender == 1))#naiste andmed</code></pre>
<pre><code>##    vars   n mean   sd median trimmed  mad   min max range skew kurtosis
## X1    1 341 0.29 0.85    0.3    0.28 0.82 -2.07 3.5  5.57 0.18      0.3
##      se
## X1 0.05</code></pre>
<pre class="r"><code>describe(subset(pisa$JOYREAD, pisa$Gender == 2))#meeste andmed</code></pre>
<pre><code>##    vars   n mean   sd median trimmed  mad   min  max range skew kurtosis
## X1    1 396 -0.5 0.72  -0.58   -0.52 0.64 -3.23 1.93  5.16 0.18     0.52
##      se
## X1 0.04</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Tehke histogrammid tunnuse JOYREAD jaotuste kohta. Kasutage allolevat koodi, et eristada ühel joonisel poiste ja tüdrukute tulemusi.</li>
</ol>
<pre class="r"><code>ggplot(andmed, aes(x=tunnus))+
        geom_histogram()+
        facet_wrap(~kategoriseeriv tunnus)</code></pre>
<pre class="r"><code>ggplot(pisa, aes(x=JOYREAD))+
        geom_histogram()+
        facet_wrap(~Gender)+
        theme_bw()</code></pre>
<p><img src="Figs/unnamed-chunk-24-1.png" width="768" /></p>
</div>
</div>
<div id="korrelatsioonanaluus" class="section level1">
<h1>Korrelatsioonanalüüs</h1>
<p>Kui tahate arvutada korrelatsiooni kahe muutuja vahel, siis soovitan kasutada funktsiooni <em>cor.test()</em>. Vaikimisi teeb see funktsioon Pearsoni korrelatsioonanalüüsi. Selle seade muutmiseks peab lisama argumendi “method =”spearman“”.</p>
<pre class="r"><code>cor.test(pisa$PV1MATH, pisa$PV1READ)</code></pre>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  pisa$PV1MATH and pisa$PV1READ
## t = 33.213, df = 744, p-value &lt; 2.2e-16
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.7421848 0.8001879
## sample estimates:
##       cor 
## 0.7727951</code></pre>
<p>Antud juhul on p-väärtus &lt; 2.2e-16 ehk p-väärtus on väiksem kui <span class="math inline">\(2.2 * 10^-16\)</span>. Sellist kirjapilti kasutatakse väga väikeste väärtuste esitamiseks.</p>
<p>Kui tahate aga arvutada korrelatsiooni mitme muutuja kohta korraga, siis soovitan kasutada funktsiooni <em>corr.test()</em> pakatist <em>psych</em>. Ka selle funtksiooni puhul saab korrelatsioonianalüüsi meetodit muuta, kui lisada argument “method =”spearman“”.</p>
<pre class="r"><code>library(psych)
corr.test(pisa[,c(&quot;PV1READ&quot;, &quot;PV1MATH&quot;, &quot;PV1SCIE&quot;)])</code></pre>
<pre><code>## Call:corr.test(x = pisa[, c(&quot;PV1READ&quot;, &quot;PV1MATH&quot;, &quot;PV1SCIE&quot;)])
## Correlation matrix 
##         PV1READ PV1MATH PV1SCIE
## PV1READ    1.00    0.77    0.84
## PV1MATH    0.77    1.00    0.83
## PV1SCIE    0.84    0.83    1.00
## Sample Size 
## [1] 746
## Probability values (Entries above the diagonal are adjusted for multiple tests.) 
##         PV1READ PV1MATH PV1SCIE
## PV1READ       0       0       0
## PV1MATH       0       0       0
## PV1SCIE       0       0       0
## 
##  To see confidence intervals of the correlations, print with the short=FALSE option</code></pre>
<div id="hajuvusdiagramm-scatterplot" class="section level2">
<h2>Hajuvusdiagramm (<em>scatterplot</em>)</h2>
<p>Korrelatsiooni illustreerimiseks saab kasutada hajuvusdiagrammi. See võimaldab öelda, kas seos tunnuste vahel on lineaarne ja kas andmetes esineb üksikuid erindeid, mis võivad tulemusi kallutada. Teeme hajuvusdiagrammi matemaatika ja loodusteaduste alatesti tulemustega.</p>
<pre class="r"><code>ggplot(pisa, aes(x= PV1MATH, y = PV1SCIE))+
        geom_point()+#hajuvusdiagrammi lisamine
        theme_bw()</code></pre>
<p><img src="Figs/unnamed-chunk-27-1.png" width="768" /></p>
<p>Vaikimisi tähistavad hajuvusdiagrammil andmepunkte mustad punktid. Nende kuju saame muuta, kui lisame kihile <em>geom_smooth</em> arugmendi “<em>shape = …</em>”. Selle argumendi väärtus määrab punktide kuju (Joonis 2):</p>
<div class="figure">
<img src="symbols2.png" alt="Joonis 2. Argumendis shape väärtused" />
<p class="caption">Joonis 2. Argumendis shape väärtused</p>
</div>
<p>Hea oleks joonisele lisada regressioonisirge, mis näitab muutujatevahelise seose tugevust ja suunda. Seda saab teha, kui lisada uus kiht <em>geom_smooth()</em> argumendiga “<em>method = lm</em>”:</p>
<pre class="r"><code>ggplot(pisa, aes(x= PV1MATH, y = PV1SCIE))+
    geom_point(shape=1) +    # shape = 1 - tühjad ringid
    geom_smooth(method=lm,   # lisab regressioonisirge
                se=FALSE)+    # SE = FALSE - ei lisa usalduspiire
    theme_bw()</code></pre>
<p><img src="Figs/unnamed-chunk-28-1.png" width="768" /></p>
</div>
</div>
<div id="keskmiste-vordlemine-kaha-grupi-korral-t-test" class="section level1">
<h1>Keskmiste võrdlemine kaha grupi korral (t-test)</h1>
<p>T-testi abil saame võrrelda, kas kahe grupi keskmised erinevad statistiliselt olulisel määral. T-testi saame teha funktsiooniga <em>t.test</em>:<br />
<em>t.test(y~x)</em>, kus y on numbriline tunnus ja x on kategooria (binaarne).</p>
<pre class="r"><code>t.test(pisa$PV1READ~pisa$Gender)</code></pre>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  pisa$PV1READ by pisa$Gender
## t = 7.251, df = 735.99, p-value = 1.049e-12
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  29.83468 51.98782
## sample estimates:
## mean in group 1 mean in group 2 
##        513.5414        472.6302</code></pre>
<pre class="r"><code>#t.test(PV1MATH~Gender, data=pisa) # võime kirjutada funktsiooni ka sellisel kujul</code></pre>
<p><strong>Ülesanne</strong><br />
4. Uurige hüpoteesi: poiste ja tüdrukute keskmised tulemused matemaatika testis on erinevad.</p>
<pre class="r"><code>t.test(pisa$PV1MATH~pisa$Gender)</code></pre>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  pisa$PV1MATH by pisa$Gender
## t = -2.4794, df = 726.74, p-value = 0.01339
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -25.273729  -2.936305
## sample estimates:
## mean in group 1 mean in group 2 
##        498.0201        512.1252</code></pre>
<div id="karpdiagramm-boxplot" class="section level2">
<h2>Karpdiagramm (<em>boxplot</em>)</h2>
<p>Gruppide võrdlemisel saab kasutada karpdiagrammi. Vaatame matemaatiak tulemuste jaotusi sugude lõikes karpdiagrammi abil.</p>
<pre class="r"><code>ggplot(pisa, aes(y = PV1MATH, x = as.factor(Gender)))+
        geom_boxplot()+
        labs(x = &quot;klass&quot;, y = &quot;matemaatika alatesti skoor&quot;)</code></pre>
<p><img src="Figs/unnamed-chunk-31-1.png" width="768" /></p>
<p>Mida karpdiagrmmi osad tähistavad? Karbi keskel olev joon on grupi mediaanväärtus (pooled väärtused on sellest suuremad ja pooled väiksemad). Karp ise tähistab kvartiilhaaret ehk keskmist 50% väärtustest. Juhul kui eraldi punktidena välja toodud äärmuslikke väärtusi ei esine, tähistavad vuntsid vastavalt grupi kõige suuremat ja kõige väiksemat väärtust. Äärmuslike erindite esinemise korral tähistab vunts kõige suuremat/väiksemat “mõistlikku” väärtust (st viimane andmepunkt, mis jääb karbi servast mitte rohkem kui 1,5-kordse kvartiilhaarde võrra üles- või allapoole). Kuidas gruppidevahelisi erinevusi tõlgendada? Kui kahe grupi karbid omavahel ei kattu, võib üsna julgelt öelda, et need grupid erinevad vaadeldava tunnuse osas. Kui karbid kattuvad ja mõlema grupi puhul jääb mediaan teise grupi karbi sisse, võib öelda et grupid ei erine tunnuse osas. Kui karbid kattuvad, aga vähemalt ühe grupi mediaan jääb väljapoole teise grupi karpi, võib aga ei pruugi oluline seos esineda. Sellisel juhul tuleks erinevust täpsemalt uurida mõne muu meetodiga nt t-testi või ANOVA-ga. Lisaks gruppidevahelistele erinevustele aitab karpdiagramm gruppide siseselt aimu saada ka jaotuse sümmeetrilisuse kohta. Kui karbi mediaanist ülespoole jääv osa on suurem kui allapoole jääv osa või üks vunts suurem kui teine, ei ole tunnus päris sümmeetiriliselt jaotunud.</p>
</div>
<div id="keskmised-koos-usalduspiiridega" class="section level2">
<h2>Keskmised koos usalduspiiridega</h2>
<p>T-testi tulemuse illustreerib aga paremini joonis, kus on esitatud keskmised tulemused koos usalduspiiridega. Siinkohal soovitan kasutada funktsiooni <em>plotmeans</em> paketist <em>gplots</em>. Seda joonist saab teha ka funktsiooniga <em>ggplot</em>, aga seal vajab see rohkem eeltööd (<a href="http://www.cookbook-r.com/Graphs/Plotting_means_and_error_bars_(ggplot2)/" class="uri">http://www.cookbook-r.com/Graphs/Plotting_means_and_error_bars_(ggplot2)/</a>).</p>
<pre class="r"><code>library(gplots) # enne tuleb pakett arvutisse insatalleerida
plotmeans(PV1MATH ~ Gender, data = pisa, frame = FALSE)</code></pre>
<p><img src="Figs/unnamed-chunk-32-1.png" width="768" /></p>
</div>
</div>
<div id="ulesanded---joonised" class="section level1">
<h1>Ülesanded - Joonised</h1>
<ol style="list-style-type: decimal">
<li>Histogramm matemaatika alatesti tulemuste kohta (lisage joonisele pealkiri):</li>
</ol>
<pre class="r"><code>ggplot(pisa, aes(PV1MATH))+
        geom_histogram(col = &quot;blue&quot;, fill = &quot;gray&quot;)+
        labs(title = &quot;Mamtemaatika tulemused&quot;)</code></pre>
<p><img src="Figs/unnamed-chunk-33-1.png" width="768" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Tehke karpdiagramm, mis illustreerib poiste ja tüdrukute matemaatika alatestide skoore</li>
</ol>
<pre class="r"><code>ggplot(pisa, aes(x = as.factor(Gender), y = PV1MATH))+ #kui joonis ei tee eraldi tulpasi, siis tuleb lisada kategoriseerivale tunnusele funtksioon as.factor()
        geom_boxplot(fill = &quot;grey80&quot;, colour = &quot;#3366FF&quot;)+ #värvisin karpide sisu hallikaks ja karpide ääre siniseks
        scale_x_discrete(labels = c(&quot;tüdrukud&quot;, &quot;poisid&quot;))+
        labs(x = &quot;sugu&quot;, y = &quot;matemaatika tulemused&quot;)+
        theme_classic() #lisasin juba töödeldud vormi joonisele</code></pre>
<p><img src="Figs/unnamed-chunk-34-1.png" width="768" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Näidake matemaatika ja lugemise alatestide tulemuste seost (lisage joonisele regressioonisirge). Arvutage ka korrelatsioonikordaja.</li>
</ol>
<pre class="r"><code>ggplot(pisa, aes(x= PV1MATH, y = PV1READ))+
    geom_point(shape=1) +    # shape = 1 - tühjad ringid
    geom_smooth(method=lm, se=TRUE)    # lisab regressioonisirge, se = TRUE - lisab usalduspiire</code></pre>
<p><img src="Figs/unnamed-chunk-35-1.png" width="768" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Näidake lugemise ja loodusteaduste alatestide tulemuste seos (lisage joonisele regressioonisirge). Arvutage ka korrelatsioonikordaja.</li>
</ol>
<pre class="r"><code>ggplot(pisa, aes(x= PV1READ, y = PV1SCIE))+
        geom_point(shape=1) +    # shape = 1 - tühjad ringid
        geom_smooth(method=lm, se=TRUE) +   # lisab regressioonisirge, se = TRUE - lisab usalduspiire
        theme_classic() </code></pre>
<p><img src="Figs/unnamed-chunk-36-1.png" width="768" /></p>
<ul>
<li><ol start="5" style="list-style-type: decimal">
<li>Tehke tulpdiagramm lugemise alatesti keskmiste tulemuste kohta erinevate klasside lõikes.</li>
</ol></li>
</ul>
<pre class="r"><code>ggplot(pisa, aes(y=PV1READ, x = GR))+
        geom_bar(aes(group = GR), stat = &quot;summary&quot;, fun.y = &quot;mean&quot;) +
        labs(x =&quot;klass&quot; , y = &quot;lugemise alatesti keskmine skoor&quot;)</code></pre>
<p><img src="Figs/unnamed-chunk-37-1.png" width="768" /></p>
<pre class="r"><code>#kontrollime funktsiooniga tapply() kas saime joonisele õiged tulemused:
tapply(pisa$PV1READ, pisa$GR, mean, na.rm =TRUE)</code></pre>
<pre><code>##        7        8        9 
## 350.5693 466.1382 505.2515</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Tehke eraldi histogramm tüdrukute ja poiste matemaatika alatesti tulemuste kohta:</li>
</ol>
<pre class="r"><code>#Selle ülesande lahendamiseks on mitu võimalust. 
# Esiteks saate teha uued andmestikud funktsiooniga subset ja kasutada neid andmestikke jooniste koostamisel:
pisa_tydrukud &lt;- subset(pisa, Gender == 1)
pisa_poisid &lt;- subset(pisa, Gender == 2)

# Teiseks saate kasutada ka joonise koostamise ajal funktsiooni subset:
ggplot(subset(pisa, Gender == 1), aes(x=PV1MATH))+
        geom_histogram()+
        labs(tilte =&quot;Tüdrukute tulemused&quot;)</code></pre>
<p><img src="Figs/unnamed-chunk-39-1.png" width="768" /></p>
<pre class="r"><code>ggplot(subset(pisa, Gender == 2), aes(x=PV1MATH))+
        geom_histogram()+
        labs(tilte =&quot;Poiste tulemused&quot;)</code></pre>
<p><img src="Figs/unnamed-chunk-39-2.png" width="768" /></p>
<pre class="r"><code>#Kolmandaks saate kasutada ggplot&#39;i kihti nimega facet_wrap()
ggplot(pisa, aes(x=PV1MATH))+
        geom_histogram()+
        facet_wrap(~Gender)#selle kihiga saab lisada kategoriseeriva tunnuse joonisele</code></pre>
<p><img src="Figs/unnamed-chunk-39-3.png" width="768" /></p>
<ol start="7" style="list-style-type: decimal">
<li>Analüüsiga, kas poiste ja tüdrukute keskmised tulemused erinevad lugemise nautimise suhtes (JOYREAD) ja õpetajaga läbisaamise suhtes(STUDREL). Tehke tulemsute kohta joonised (keskmised koos usalduspiiridega).</li>
</ol>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
